/*! selectlist 0.6.1.1 */ (function(e){e.selectList=function(t,n){function r(e,t){n.addAnimate&&v?"function"==typeof n.addAnimate?n.addAnimate(e.hide()[0],t):(e.hide().fadeIn(300,t),e[0].style.display=""):(e[0].style.display="",t&&t.call(e[0]))}function i(e,t){n.removeAnimate&&v?"function"==typeof n.removeAnimate?n.removeAnimate(e[0],t):e.fadeOut(300,t):(e.hide(),t&&t.call(e[0]))}function s(t,r){return"function"==typeof n.sort?n.sort(t,r):e(t).data("text")>e(r).data("text")==("desc"!=n.sort)}function o(i,o,d){if(e(i).is("option")){if(p=e(i),w>p[0].index)return;i=p.val(),o=p.text()}else p=f.find('option[value="'+i.replace("'",'\\"')+'"]'),p=p.length?p.filter(function(){return!o||e(this).text()==o}).add(p).eq(0):null;void 0===o&&(o=p?p.text():i),p&&!n.duplicates&&p.attr("disabled","disabled").data("disabled",1),h=e(n.template.replace(/%text%/g,e("<b/>").text(o).html()).replace(/%value%/g,i)).hide(),h.data("value",i).data("text",o).data("option",p).addClass(n.classPrefix+"-item"),h.click(function(){n.clickRemove&&u(e(this))});var v=function(){d!==!1&&n.onAdd(t,i,o)};if(n.sort&&(c=l.children().eq(0)).length){for(;c.length&&s(h[0],c[0]);)c=c.next();r(c.length?h.insertBefore(c):h.appendTo(l),v)}else r(h.appendTo(l),v);e(t).empty(),l.children().each(function(){e(t).append(e("<option/>").attr({value:e(this).data("value"),selected:"selected"}))}),a()}function u(r,s){i(r,function(){var r=e(this).data("value"),i=e(this).data("text");e(this).data("option")&&e(this).data("option").removeAttr("disabled").removeData("disabled"),e(this).remove(),e(t).find('option[value="'+r+'"]').remove(),a(),s!==!1&&n.onRemove(t,r,i)})}function a(){t.form&&"function"==typeof e(t.form).validate&&e(t).add(f).hasClass(e(t.form).validate().settings.errorClass)&&e(t.form).validate().element(t)}var f,l,c,h,p,d,v,m,g,y,b,w=0,E=navigator.userAgent;this.val=function(n){return void 0!==n&&(e("option",f).prop("disabled",!1).removeData("disabled"),l.empty(),null!==n&&e.each(e.makeArray(n),function(e,t){o(t)})),e(t).val()},this.add=function(e,t){o(e,t)},this.remove=function(t){l.children().each(function(){(e(this).data("value")==t||t===void 0)&&u(e(this))})},this.setOptions=function(t){var r=t.sort&&t.sort!=n.sort;if(n=e.extend(n,t),r){var i=[];l.children().each(function(){i[i.length]=e(this).data("value"),i[i.length]=e(this).data("text")}),l.empty();for(var s=0;i.length>s;s+=2)o(i[s],i[s+1],!1)}};var S=(/msie ([\w.]+)/i.exec(E)||[])[1],x=/webkit/i.test(E)&&!/chrome/i.test(E);this.setOptions(n=e.extend({addAnimate:!0,classPrefix:"selectlist",clickRemove:!0,removeAnimate:!0,template:"<li>%text%</li>",onAdd:function(){},onRemove:function(){}},n)),f=e(t).clone(),f.removeAttr("id").removeAttr("name").addClass(n.classPrefix+"-select").insertAfter(e(t)),e(t).empty().hide(),(l=e(n.list||e("<ul/>").insertAfter(f))).addClass(n.classPrefix+"-list"),f.find(":selected").each(function(){o(e(this),null,!1)}),f.removeAttr("multiple"),f[0].removeAttribute("size"),f.attr("title")&&(f.prepend(e("<option/>").text(f.attr("title"))),w=1,f[0].selectedIndex=0),d=S||x?"keydown":"keypress",f.bind(d,function(e){return y=!0,13==(e.keyCode||e.which)?(b=!0,f.change(),y=!0,!1):void 0}).change(function(){(y||g)&&(m=!0,p=f.find("option:selected"),p.data("disabled")||y&&!blur||o(p),y?y=m=g=!1:w&&(f[0].selectedIndex=0),b=!1)}).mousedown(function(){g=!0}),f.find("option").click(function(){return g=!0,e(this).attr("disabled")||e(this).data("disabled")||y||m||o(e(this)),y||(m=g=!1),!1}),v=!0},e.fn.selectList=function(t){return t=t||{},this.filter("select").each(function(){e(this).data("selectList")?e(this).data("selectList").setOptions(t):e(this).data("selectList",new e.selectList(this,t))}),t.instance?this.filter("select").data("selectList"):this};var t=e.valHooks.select.set;e.valHooks.select.set=function(n,r){return e(n).data("selectList")?e(n).data("selectList").val(r):t(n,r)}})(jQuery);